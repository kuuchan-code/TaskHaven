```mermaid
flowchart TD
  A[ユーザーブラウザ]
  B[Next.js フロントエンド] -->|デプロイ先| B1["Cloudflare Pages"]
  C["Next.js API ルート\n/api/tasks\n/api/updateWebhook"]
  D["Supabase データベース\n tasks, task_with_priority, users"]
  E["Supabase Functions\nnotify-tasks"]
  F[Discord Webhook]
  G["cron-job.org\n(1分毎にPOST)"]

  A -->|アクセス| B
  B -->|APIリクエスト| C
  C -->|DB操作| D
  E -->|タスク取得| D
  E -->|通知送信| F
  G -->|リクエスト送信| E

  %% フロントエンド内のコンポーネント
  B --- H[TaskPage]
  H --- I[TaskForm]
  H --- J[InteractiveTaskDashboard]
  H --- K[WebhookForm]

  %% 通知フロー
  E -- ユーザー設定取得・タスク抽出 --> D
  E -- 通知条件チェック --> D
  E -- 通知メッセージ送信 --> F
```